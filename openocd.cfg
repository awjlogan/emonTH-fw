# Custom OpenOCD config for Microchip ATSAML10 with Atmel-ICE
# Cortex-M23 core, SWD interface

adapter driver cmsis-dap
transport select swd

if { [info exists CHIPNAME] } {
    set _CHIPNAME $CHIPNAME
} else {
    set _CHIPNAME atsaml10
}

# Load Cortex-M23 settings
source [find target/atsaml1x.cfg]

#set _TARGETNAME $_CHIPNAME.cpu
#target create $_TARGETNAME cortex_m \
#    -endian little \
#    -rtos auto \
#    -cpu cortex-m23

# Memory config (adjust based on your SAML10 variant)
$_TARGETNAME configure -work-area-phys 0x20000000 \
                       -work-area-size 0x1000 \
                       -work-area-backup 0

# Reset config
# reset_config srst_only srst_nogate srst_push_pull
